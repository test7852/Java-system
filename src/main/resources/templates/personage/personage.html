<!DOCTYPE html >
<!--suppress ThymeleafVariablesResolveInspection-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" th:href="@{/layui/css/layui.css}" media="all" />
		<script th:src="@{/layui/layui.js}"></script>
		<script th:src="@{/js/register/jquery-3.1.0.min.js}"></script>
		<title></title>
	</head>
	<style>
			.menu li{float: left;}
			input[type=text]{border-radius:13px;border:1px solid #000;}
			.layui-input{border-radius:13px;border:1px solid #000;;}
	</style>
	<body>
		<div style="text-align: center;">
			<fieldset class="layui-elem-field layui-field-title" >
		  <legend> 关于我的信息</legend>
		</fieldset>
 
		<div class="layui-tab layui-tab-brief" style="margin-left: 10%;" lay-filter="docDemoTabBrief">
		  <ul class="layui-tab-title">
		    <li class="layui-this">我的资料</li>
		    <li>头像 设置</li>
		    <li>密码 设置</li>
		    <li>账号绑定</li>
		    <li>需要继续添加Tab</li>
		  </ul>
		  <div class="layui-tab-content" style="height: 500px;width: 1000px;" th:each="p:${person}">
		    <div class="layui-tab-item layui-show">
		    	<form class="layui-form" th:action="@{/personage/update}">
						<input type="hidden" name="emp_id" th:value="${p.emp_id}" />
						<input type="hidden" id="password" th:value="${p.password}" />
		    			<li>
					  		 <div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> 手机号码</label>
							    <div class="layui-input-inline">
							      <input disabled th:value="${p.phone}"  name="phone" required lay-verify="required" placeholder="请输入手机号码" autocomplete="off" class="layui-input">
							    <div class="layui-form-mid layui-word-aux">手机号码已注册，不可修改</div>
							    </div>
							  </div>
					  	</li>
					  <ul class="menu">
					  
					  	<li>
					  		<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> 邮箱地址</label>
							    <div class="layui-input-inline">
							      <input  name="email" th:value="${p.email}" required lay-verify="required" placeholder="请输入邮箱地址" autocomplete="off" class="layui-input">
							    </div>
							  </div>
					  	</li>
					  	
					  	<li>
					  		<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> <i class="layui-icon">&#xe677;</i> 微信</label>
							    <div class="layui-input-inline">
							      <input  name="weixin" th:value="${p.weixin}" required lay-verify="required" placeholder="请输入VX" autocomplete="off" class="layui-input">
							    </div>
							  </div>
					  	</li>
					  	<li>
					  		<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> <i class="layui-icon">&#xe676;</i>   QQ</label>
							    <div class="layui-input-inline">
							      <input  name="qqcode" th:value="${p.qqcode}" required lay-verify="required" placeholder="请输入QQ" autocomplete="off" class="layui-input">
							    </div>
							  </div>
					  	</li>
					  	<li>
					  		<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> 支付宝</label>
							    <div class="layui-input-inline">
							      <input  name="alipay" th:value="${p.alipay}" required lay-verify="required" placeholder="请输入支付宝" autocomplete="off" class="layui-input">
							    </div>
							  </div>
							</li>
							<li>
								<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> <i class="layui-icon">&#xe637;</i> 入职</label>
							    <div class="layui-input-inline">
							      <input id="hireday" name="hireday" th:value="${p.hireday}" required lay-verify="required" placeholder="选择入职时间" autocomplete="off" class="layui-input">
							    </div>
							  </div>
							</li>
							<li>
								<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> <i class="layui-icon">&#xe637;</i> 离职</label>
							    <div class="layui-input-inline">
							      <input  id="fireday" name="fireday" th:value="${p.fireday}" required lay-verify="required" placeholder="选择离职时间" autocomplete="off" class="layui-input">
							    </div>
							  </div>
							</li>
							<li>
								<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> 用户昵称</label>
							    <div class="layui-input-inline">
							      <input  name="emp_name" th:value="${p.emp_name}" required lay-verify="required" placeholder="请输入用户昵称" autocomplete="off" class="layui-input">
							    </div>
							  </div>
							</li>
							<li>
								<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> 学校</label>
							    <div class="layui-input-inline">
							      <input  name="education" th:value="${p.education}" required lay-verify="required" placeholder="在读或毕业学校" autocomplete="off" class="layui-input">
							    </div>
							  </div>
							</li>
							
							<li>
								<div class="layui-form-item">
							    <label class="layui-form-label"><i style="color: red">*</i> 当前状态</label>
							    <div class="layui-input-inline">
							      <input  name="status" th:value="${p.status}" required lay-verify="required" placeholder="当前状态" autocomplete="off" class="layui-input">
							    </div>
							  </div>
							</li>
					  </ul>
					
					   <div class="layui-form-item">
						    <label class="layui-form-label">性别 <i class="layui-icon">&#xe662;</i></label>
						    <div class="layui-input-block">
						      <input type="radio" th:checked="${p.emp_sex=='男'}" name="emp_sex" value="男" title="男"checked>
						      <input type="radio" th:checked="${p.emp_sex=='女'}" name="emp_sex" value="女" title="女" >
						    </div>
						  </div>
				        <div class="layui-form-item" id="area-picker">
				            <div class="layui-form-label">城市</div>
				            <div name="city" class="layui-input-inline" style="width: 100px;">
				                <select name="province" class="province-selector" data-value="广东省" lay-filter="province-1">
				                    <option value="">请选择省</option>
				                </select>
				            </div>
				            <div name="city" class="layui-input-inline" style="width: 100px;">
				                <select name="city" class="city-selector" data-value="深圳市" lay-filter="city-1">
				                    <option value="">请选择市</option>
				                </select>
				            </div>
				            <div name="city" class="layui-input-inline" style="width: 100px;">
				                <select name="county" class="county-selector" data-value="龙岗区" lay-filter="county-1">
				                    <option value="">请选择区</option>
				                </select>
				            </div>
				        </div>
					  <div class="layui-form-item layui-form-text">
					    <label class="layui-form-label">我的标签</label>
					    <div style="width: 400px;" class="layui-input-block">
					      <textarea  name="desc" placeholder="请输入内容" class="layui-textarea">只喜欢你，像风走了八千里QWQ</textarea>
					    </div>
					  </div>
					  <div class="layui-form-item">
					    <div class="layui-input-block">
					      <button class="layui-btn layui-btn-normal layui-btn-radius" lay-submit >立即提交</button>
					      <button type="reset" class="layui-btn layui-btn-radius layui-btn-primary">重置</button>
					    </div>
					  </div>
					</form>
		    </div>
		    <div class="layui-tab-item">
		    	<div class="layui-form-item">
                    <label class="layui-form-label"><i style="color: red">*</i>图片:</label>
                    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
							  <legend>常规使用：普通图片上传</legend>
							</fieldset>
							 
							<div class="layui-upload">
							  <button type="button" class="layui-btn layui-btn-radius" id="test1">上传图片</button>
							  <div  class="layui-upload-list">
							    <img style="width: 300px;height: 300px;" class="layui-upload-img" id="demo1">
							    <p id="demoText"></p>
							  </div>
							</div> 
                </div>
		    </div>
		    <div class="layui-tab-item">
		    	<div class="layui-form-item">
				    <label class="layui-form-label"><i style="color: red">*</i> 当前密码</label>
				    <div class="layui-input-inline">
				      <input type="password" id="password1" required lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
				    </div>
				  </div>
				  <div class="layui-form-item">
				    <label class="layui-form-label"><i style="color: red">*</i> <i class="layui-icon">&#xe673;</i>新密码</label>
				    <div class="layui-input-inline">
				      <input type="password" id="password2" required lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
				    </div>
				    <div class="layui-form-mid layui-word-aux">6到16个字符，非法字符不可</div>
				  </div>
				  <div class="layui-form-item">
				    <label class="layui-form-label"><i style="color: red">*</i> 确认密码</label>
				    <div class="layui-input-inline">
				      <input type="password" id="password3" required lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
				    </div>
				  </div>
				 
				   <div class="layui-form-item">
					    <div class="layui-input-block">
					 
					      <button  class="layui-btn layui-btn-normal layui-btn-radius"  id="ok">确认修改</button>
					      <button type="reset" class="layui-btn layui-btn-radius layui-btn-primary">重新填写</button>
					    </div>
					  </div>
		    </div>
		    <div class="layui-tab-item">
		    	内容4
		    </div>
		    <div class="layui-tab-item">
		    	内容5
		    </div>
		  </div>
		</div>
		
</div> 
	</body>
	<script>
		layui.use(['form','element','upload','laydate'], function(){
						  var $ = layui.jquery
						  ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
						  var from=layui.from;
						  var upload = layui.upload;
						  var laydate=layui.laydate;
						 
						//执行一个laydate实例
							 //常规用法
								laydate.render({
								  elem: '#hireday'
								});
								laydate.render({
								  elem: '#fireday'
								});

						//确认修改密码
						$("#ok").on('click',function(){
							if($("#password1").val()!=$("#password").val()){
								layer.msg("当前密码填写有误")
								return;
							}else if($("#password2").val()!=$("#password3").val()){
								layer.msg("确认密码填写有误")
								return;
							}
							$.ajax({
								url: '/personage/update',
								type: 'post',
								data: {
									password:$("#password2").val()
								},
								dataType: 'text',
							})

						})
								
						  
						  
						  //普通图片上传
						  var uploadInst = upload.render({
						    elem: '#test1'
						    ,url: '' //改成您自己的上传接口
						    ,before: function(obj){
						      //预读本地文件示例，不支持ie8
						      obj.preview(function(index, file, result){
						        $('#demo1').attr('src', result); //图片链接（base64）
						      });
						    }
						    ,done: function(res){
						      //如果上传失败
						      if(res.code > 0){
						        return layer.msg('上传失败');
						      }
						      //上传成功
						    }
						    ,error: function(){
						      //演示失败状态，并实现重传
						      var demoText = $('#demoText');
						      demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
						      demoText.find('.demo-reload').on('click', function(){
						        uploadInst.upload();
						      });
						    }
						  });
						  
						  
						 //配置插件目录
					        layui.config({
					            base: '../layui/'
					            , version: '1.0'
					        });
					        //一般直接写在一个js文件中
					        layui.use(['layer', 'form', 'layarea'], function () {
					            var layer = layui.layer
					                , form = layui.form
					                , layarea = layui.layarea;
					
					            layarea.render({
					                elem: '#area-picker',
					                change: function (res) {
					                    //选择结果
					                    console.log(res);
					                }
					            });
					        });
					        
						});					
</script>

</html>
